(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{26:function(e,t,a){e.exports={loader:"Loader_loader__1j2Bs"}},74:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),o=a.n(s),c=a(9),i=a.n(c),u=a(12),l=a(15),h=a(4),d=a(5),m=a(7),g=a(6),p=a(16),f=a(27),b=a(1),j=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.handleChange=function(t){var a=t.target.value;e.setState({query:a})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.query;a.trim()&&(e.props.onSubmit(a.toLowerCase()),e.reset())},e.reset=function(){e.setState({query:""})},e}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return t.query!==this.state.query}},{key:"render",value:function(){var e=this.state.query;return Object(b.jsx)("header",{className:"Searchbar",children:Object(b.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(b.jsx)("button",{type:"submit",className:"SearchForm-button","aria-label":"Search images",children:Object(b.jsx)(f.a,{style:{width:22,height:22}})}),Object(b.jsx)("input",{className:"SearchForm-input",type:"text",name:"searchQuery",value:e,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleChange})]})})}}]),a}(n.Component),v=document.querySelector("#modal-root"),y=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){var a=t.code;"Escape"===a&&e.props.toggleModal(),"ArrowRight"===a&&e.props.setNextImage(),"ArrowLeft"===a&&e.props.setPrevImage()},e.handleOverlayClick=function(t){t.currentTarget===t.target&&e.props.toggleModal()},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.children;return Object(s.createPortal)(Object(b.jsx)("div",{className:"Overlay",onClick:this.handleOverlayClick,children:Object(b.jsx)("div",{className:"Modal",children:e})}),v)}}]),a}(n.Component),x=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={imageIdx:null,imagesCount:null,showModal:!1},e.handleClick=function(t){var a=t.imageIdx,n=t.imagesCount;e.setState({imageIdx:a,imagesCount:n}),e.toggleModal()},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.setNextImage=function(){e.setState((function(e){var t=e.imageIdx+1;return{imageIdx:t<e.imagesCount?t:0}}))},e.setPrevImage=function(){e.setState((function(e){var t=e.imageIdx,a=e.imagesCount,n=t-1;return{imageIdx:n>=0?n:a-1}}))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props.images,a=this.state,n=a.imageIdx,r=a.showModal;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("ul",{className:"ImageGallery",children:t.map((function(a,n){var r=a.id,s=a.webformatURL,o=a.tags;return Object(b.jsx)("li",{className:"ImageGalleryItem",onClick:function(){return e.handleClick({imageIdx:n,imagesCount:t.length})},children:Object(b.jsx)("img",{className:"ImageGalleryItem-image",src:s,alt:o})},r)}))}),r&&Object(b.jsx)(y,{toggleModal:this.toggleModal,setNextImage:this.setNextImage,setPrevImage:this.setPrevImage,children:Object(b.jsx)("img",{src:t[n].largeImageURL,alt:t[n].tags})})]})}}]),a}(n.Component),O=function(e){var t=e.onClick;return Object(b.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load more"})},w=a(25),S=a.n(w),k=a(26),I=a.n(k),C=function(){return Object(b.jsx)("div",{className:I.a.loader,children:Object(b.jsx)(S.a,{type:"ThreeDots",color:"#3d8679",height:120,width:120,timeout:3e3})})},q=a(13),N=a.n(q);N.a.defaults.baseURL="https://pixabay.com/api",N.a.defaults.params={key:"22909528-f64cd92665831d6faf8601377",image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:12};var M=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query,n=t.page,e.next=3,N()("?".concat(new URLSearchParams({q:a,page:n}).toString()));case 3:return r=e.sent,s=r.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L="idle",D="pending",P="rejected",U="resolved",A=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={query:"",page:1,images:[],status:L},e.handleSubmit=function(t){e.setState({query:t,page:1})},e.incrementPage=function(){e.setState((function(e){return{page:e.page+1}}))},e.resetImages=function(){e.setState({images:[]})},e.addImages=function(t){e.setState((function(e){var a=e.images;return{images:[].concat(Object(l.a)(a),Object(l.a)(t))}}))},e.switchStatus=function(t){e.setState({status:t})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({query:"top"})}},{key:"getSnapshotBeforeUpdate",value:function(){return window.scrollY}},{key:"componentDidUpdate",value:function(){var e=Object(u.a)(i.a.mark((function e(t,a,n){var r,s,o,c,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.state,s=r.query,o=r.page,s!==a.query||o!==a.page){e.next=3;break}return e.abrupt("return");case 3:return this.switchStatus(D),e.prev=4,e.next=7,M({query:s,page:o});case 7:if(c=e.sent,u=c.hits,c.totalHits){e.next=12;break}throw new Error("Sorry, there are no images matching your search query.");case 12:if(u.length){e.next=14;break}throw new Error("We're sorry, but you've reached the end of search results.");case 14:1===o&&this.resetImages(),this.addImages(u),this.switchStatus(U),o>1&&E(n),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(4),l=e.t0.message,this.switchStatus(P),p.b.error(l);case 25:case"end":return e.stop()}}),e,this,[[4,20]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.images,a=e.status;return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(j,{onSubmit:this.handleSubmit}),Object(b.jsx)(x,{images:t}),a===D&&Object(b.jsx)(C,{}),a===U&&Object(b.jsx)(O,{onClick:this.incrementPage}),Object(b.jsx)(p.a,{autoClose:3e3})]})}}]),a}(n.Component);function E(e){window.scrollTo({top:window.innerHeight+e-150,behavior:"smooth"})}var F=A;a(72),a(73),a(74);o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(F,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.d32028a4.chunk.js.map