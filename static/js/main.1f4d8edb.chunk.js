(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{25:function(e,t,a){e.exports={loader:"Loader_loader__1j2Bs"}},72:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var r,n=a(0),s=a.n(n),c=a(11),o=a.n(c),i=a(8),l=a.n(i),u=a(12),h=a(15),m=a(4),d=a(5),g=a(7),p=a(6),f=a(26),b=a(1),v=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={query:""},e.handleChange=function(t){var a=t.target.value;e.setState({query:a})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.query;a.trim()&&(e.props.onSubmit(a.toLowerCase()),e.reset())},e.reset=function(){e.setState({query:""})},e}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return t.query!==this.state.query}},{key:"render",value:function(){var e=this.state.query;return Object(b.jsx)("header",{className:"Searchbar",children:Object(b.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(b.jsx)("button",{type:"submit",className:"SearchForm-button","aria-label":"Search images",children:Object(b.jsx)(f.a,{style:{width:22,height:22}})}),Object(b.jsx)("input",{className:"SearchForm-input",type:"text",name:"searchQuery",value:e,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleChange})]})})}}]),a}(n.Component),j=function(e){var t=e.webformatURL,a=e.tags,r=e.onClick;return Object(b.jsx)("li",{className:"ImageGalleryItem",onClick:r,children:Object(b.jsx)("img",{className:"ImageGalleryItem-image",src:t,alt:a})})},y=document.querySelector("#modal-root"),O=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).handleKeyDown=function(t){var a=t.code;"Escape"===a&&e.props.toggleModal(),"ArrowRight"===a&&e.props.setNextImage(),"ArrowLeft"===a&&e.props.setPrevImage()},e.handleOverlayClick=function(t){t.currentTarget===t.target&&e.props.toggleModal()},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.children;return Object(c.createPortal)(Object(b.jsx)("div",{className:"Overlay",onClick:this.handleOverlayClick,children:Object(b.jsx)("div",{className:"Modal",children:e})}),y)}}]),a}(n.Component),w=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={imagesCount:null,imageIdx:null,showModal:!1},e.handleClick=function(t){e.setState({imageIdx:t}),e.toggleModal()},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.setNextImage=function(){e.setState((function(e){var t=e.imageIdx+1;return{imageIdx:t<e.imagesCount?t:0}}))},e.setPrevImage=function(){e.setState((function(e){var t=e.imageIdx,a=e.imagesCount,r=t-1;return{imageIdx:r>=0?r:a-1}}))},e}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.images!==this.props.images||t.imageIdx!==this.state.imageIdx||t.showModal!==this.state.showModal}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.images;this.setState({imagesCount:a.length})}},{key:"render",value:function(){var e=this,t=this.props.images,a=this.state,r=a.imageIdx,n=a.showModal;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("ul",{className:"ImageGallery",children:t.map((function(t,a){var r=t.id,n=t.webformatURL,s=t.tags;return Object(b.jsx)(j,{webformatURL:n,tags:s,onClick:function(){return e.handleClick(a)}},r)}))}),n&&Object(b.jsx)(O,{toggleModal:this.toggleModal,setNextImage:this.setNextImage,setPrevImage:this.setPrevImage,children:Object(b.jsx)("img",{src:t[r].largeImageURL,alt:t[r].tags})})]})}}]),a}(n.Component),x=function(e){var t=e.onClick;return Object(b.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load more"})},S=a(24),k=a.n(S),I=a(25),C=a.n(I),M=function(){return Object(b.jsx)("div",{className:C.a.loader,children:Object(b.jsx)(k.a,{type:"ThreeDots",color:"#3d8679",height:120,width:120,timeout:3e3})})},z=["title","titleId"];function q(){return q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},q.apply(this,arguments)}function N(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function E(e,t){var a=e.title,s=e.titleId,c=N(e,z);return n.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 123.87",ref:t,"aria-labelledby":s},c),a?n.createElement("title",{id:s},a):null,r||(r=n.createElement("g",{fill:"#333"},n.createElement("path",{d:"M679.67 407.38c-3.478-2.461-6.005-4.956-6.005-8.034h-19.338c0 5.54-2.527 8.034-5.645 8.034h-5.164v56.236h100.42V407.38h-64.63zm-6.006 16.067h-18.096v-8.034h20.084v6.465zm33.991 31.276c-11.457 0-20.779-9.202-20.779-20.513s9.322-20.04 20.78-20.04c11.456 0 20.777 8.728 20.777 20.04 0 11.311-9.32 20.513-20.778 20.513zm11.17-20.513c0 6.08-5.01 11.028-11.169 11.028-6.159 0-11.17-4.948-11.17-11.028 0-6.081 5.011-11.027 11.17-11.027s11.17 4.947 11.17 11.027zm77.334-34.48-25 63.735-19.185-7.693V444.91l13.323 5.452 17.592-44.844-65.92-25.205-6.11 19.034h-11l11.248-32.135 85.054 32.519z",transform:"translate(-156.157 -367.215)"}),n.createElement("g",{fontFamily:"VomZom",fontSize:23.686,wordSpacing:0,letterSpacing:0},n.createElement("path",{d:"M164.38 467.99c4.011-.092 7.776 3.17 8.2 7.17.506 3.515-1.562 7.166-4.803 8.593-1.963.974-4.18.675-6.292.725h-2.063v6.609h-3.267c.007-5.1-.013-10.2.01-15.3.107-3.799 3.218-7.202 6.974-7.707.41-.061.827-.091 1.241-.09zm0 13.219c2.357.06 4.568-1.78 4.92-4.115.47-2.35-1.03-4.877-3.322-5.582-2.214-.785-4.878.249-5.959 2.34-.839 1.428-.541 3.117-.597 4.69v2.667h4.958zM174.16 467.91h3.23v16.488h-3.23V467.91zM187.1 478.32h.118l4.592 6.123h4.004l-6.241-8.478 5.534-8.008h-4.003l-3.886 5.653h-.118l-3.886-5.653h-4.004l5.535 8.008-6.241 8.478h4.004z",transform:"matrix(4.12904 0 0 4.12904 -644.78 -1903.844)"}),n.createElement("path",{d:"M203.13 467.91c3.272-.065 6.411 2.08 7.622 5.106.632 1.405.624 2.963.603 4.472v6.91c-2.916-.01-5.833.02-8.748-.016-3.353-.164-6.418-2.608-7.378-5.815-.88-2.79-.149-6.028 1.922-8.11 1.547-1.6 3.745-2.568 5.979-2.547zm4.958 13.22c-.014-1.833.029-3.668-.024-5.5-.194-2.457-2.469-4.514-4.934-4.451-2.344-.057-4.553 1.761-4.92 4.082-.43 2.226.849 4.653 2.974 5.484 1.309.57 2.754.335 4.138.385h2.766zM221.19 467.99c3.87-.095 7.486 2.95 8.102 6.76.7 3.613-1.341 7.516-4.705 9.003-3.287 1.551-7.514.551-9.774-2.292-1.401-1.65-2.005-3.844-1.885-5.984V461.38h3.267v6.61h4.995zm0 13.219c2.482.066 4.75-2.017 4.933-4.487.31-2.454-1.508-4.922-3.937-5.368-1.344-.184-2.708-.06-4.06-.096h-1.93c.02 1.863-.045 3.729.037 5.589.26 2.46 2.485 4.41 4.957 4.362zM238.9 467.91c3.272-.065 6.411 2.08 7.622 5.106.632 1.405.624 2.963.603 4.472v6.91c-2.916-.01-5.833.02-8.748-.016-3.353-.164-6.418-2.608-7.378-5.815-.88-2.79-.149-6.028 1.922-8.11 1.547-1.6 3.746-2.568 5.979-2.547zm4.958 13.22c-.014-1.833.029-3.668-.024-5.5-.194-2.457-2.469-4.514-4.934-4.451-2.344-.057-4.553 1.761-4.92 4.082-.43 2.226.849 4.653 2.974 5.484 1.309.57 2.754.335 4.138.385h2.766zM265.11 467.95c-.007 5.088.013 10.176-.01 15.263-.119 4.004-3.56 7.603-7.577 7.812-.763.04-1.528.016-2.291.022v-3.267c1.394-.007 2.886.134 4.12-.655 1.543-.866 2.524-2.61 2.489-4.376-2.897 2.336-7.387 2.215-10.204-.196-2.052-1.657-3.174-4.322-3.015-6.945v-7.658h3.267c.015 2.911-.03 5.824.024 8.733.178 2.396 2.314 4.424 4.715 4.481 2.434.187 4.776-1.702 5.139-4.11.146-1.44.042-2.894.073-4.34v-4.764h3.27z",transform:"matrix(4.12904 0 0 4.12904 -644.78 -1903.844)"})))))}var L=n.forwardRef(E),U=(a.p,a(13)),P=a.n(U);P.a.defaults.baseURL="https://pixabay.com/api",P.a.defaults.params={key:"22909528-f64cd92665831d6faf8601377",image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:12};var D=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query,r=t.page,e.next=3,P()("?".concat(new URLSearchParams({q:a,page:r}).toString()));case 3:return n=e.sent,s=n.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R="idle",A="pending",F="rejected",_="resolved",B=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={query:"",page:1,images:[],message:"",status:R},e.handleSubmit=function(t){e.setState({query:t,page:1})},e.incrementPage=function(){e.setState((function(e){return{page:e.page+1}}))},e.resetImages=function(){e.setState({images:[]})},e.addImages=function(t){e.setState((function(e){var a=e.images;return{images:[].concat(Object(h.a)(a),Object(h.a)(t))}}))},e.switchStatus=function(t){e.setState({status:t})},e}return Object(d.a)(a,[{key:"getSnapshotBeforeUpdate",value:function(){return window.scrollY}},{key:"componentDidUpdate",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a,r){var n,s,c,o,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,s=n.query,c=n.page,s!==a.query||c!==a.page){e.next=3;break}return e.abrupt("return");case 3:return this.switchStatus(A),e.prev=4,e.next=7,D({query:s,page:c});case 7:if(o=e.sent,i=o.hits,o.totalHits){e.next=12;break}throw new Error("Sorry, there are no images matching your search query.");case 12:if(i.length){e.next=14;break}throw new Error("We're sorry, but you've reached the end of search results.");case 14:1===c&&this.resetImages(),this.addImages(i),this.switchStatus(_),c>1&&V(r),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(4),u=e.t0.message,this.switchStatus(F),this.setState({message:u});case 25:case"end":return e.stop()}}),e,this,[[4,20]])})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.images,a=e.message,r=e.status;return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(v,{onSubmit:this.handleSubmit}),Object(b.jsx)(w,{images:t}),r===A&&Object(b.jsx)(M,{}),r===_&&Object(b.jsx)(x,{onClick:this.incrementPage}),r===F&&Object(b.jsx)("div",{children:Object(b.jsx)("h2",{children:a})}),r===R&&Object(b.jsx)("div",{children:Object(b.jsx)("a",{href:"https://pixabay.com/",target:"_blank",rel:"nofollow noreferrer","aria-label":"pixabay",children:Object(b.jsx)(L,{width:"400"})})})]})}}]),a}(n.Component);function V(e){window.scrollTo({top:window.innerHeight+e-150,behavior:"smooth"})}var G=B;a(71),a(72);o.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(G,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.1f4d8edb.chunk.js.map