{"version":3,"sources":["components/Loader/Loader.module.css","components/Searchbar/Searchbar.jsx","components/Modal/Modal.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Loader/Loader.jsx","api/pixabay.js","App.jsx","index.js"],"names":["module","exports","Searchbar","state","query","handleChange","value","target","setState","handleSubmit","e","preventDefault","trim","props","onSubmit","toLowerCase","reset","nextProps","nextState","this","className","type","style","width","height","name","autoComplete","autoFocus","placeholder","onChange","Component","modalRoot","document","querySelector","Modal","handleKeyDown","code","toggleModal","setNextImage","setPrevImage","handleOverlayClick","currentTarget","window","addEventListener","removeEventListener","children","createPortal","onClick","ImageGallery","imageIdx","imagesCount","showModal","handleClick","nextIdx","images","map","id","webformatURL","tags","length","src","alt","largeImageURL","Button","Loader","s","loader","color","timeout","axios","defaults","baseURL","params","key","image_type","orientation","safesearch","per_page","fetchImages","a","q","page","URLSearchParams","toString","data","Status","App","status","incrementPage","resetImages","addImages","newImages","switchStatus","newStatus","scrollY","prevProps","prevState","snapshot","hits","totalHits","Error","scrollBottom","message","toast","error","autoClose","scrollTo","top","innerHeight","behavior","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d32028a4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__1j2Bs\"};","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { ImSearch } from 'react-icons/im';\n\nclass Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func,\n  };\n\n  state = {\n    query: '',\n  };\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextState.query !== this.state.query;\n  }\n\n  handleChange = ({ target: { value } }) => {\n    this.setState({ query: value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    const { query } = this.state;\n\n    if (!query.trim()) return;\n\n    this.props.onSubmit(query.toLowerCase());\n\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({ query: '' });\n  };\n\n  render() {\n    const { query } = this.state;\n\n    return (\n      <header className='Searchbar'>\n        <form className='SearchForm' onSubmit={this.handleSubmit}>\n          <button\n            type='submit'\n            className='SearchForm-button'\n            aria-label='Search images'\n          >\n            <ImSearch style={{ width: 22, height: 22 }} />\n          </button>\n\n          <input\n            className='SearchForm-input'\n            type='text'\n            name='searchQuery'\n            value={query}\n            autoComplete='off'\n            autoFocus\n            placeholder='Search images and photos'\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport { Searchbar };\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = ({ code }) => {\n    code === 'Escape' && this.props.toggleModal();\n    code === 'ArrowRight' && this.props.setNextImage();\n    code === 'ArrowLeft' && this.props.setPrevImage();\n  };\n\n  handleOverlayClick = ({ currentTarget, target }) => {\n    currentTarget === target && this.props.toggleModal();\n  };\n\n  render() {\n    const { children } = this.props;\n\n    return createPortal(\n      <div className='Overlay' onClick={this.handleOverlayClick}>\n        <div className='Modal'>{children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport { Modal };\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal } from '../Modal';\n\nclass ImageGallery extends Component {\n  static propTypes = {\n    images: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.number.isRequired,\n        webformatURL: PropTypes.string.isRequired,\n        largeImageURL: PropTypes.string,\n        tags: PropTypes.string,\n      }).isRequired,\n    ).isRequired,\n  };\n\n  state = {\n    imageIdx: null,\n    imagesCount: null,\n    showModal: false,\n  };\n\n  handleClick = ({ imageIdx, imagesCount }) => {\n    this.setState({ imageIdx, imagesCount });\n    this.toggleModal();\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  setNextImage = () => {\n    this.setState(({ imageIdx, imagesCount }) => {\n      const nextIdx = imageIdx + 1;\n\n      return { imageIdx: nextIdx < imagesCount ? nextIdx : 0 };\n    });\n  };\n\n  setPrevImage = () => {\n    this.setState(({ imageIdx, imagesCount }) => {\n      const nextIdx = imageIdx - 1;\n\n      return { imageIdx: nextIdx >= 0 ? nextIdx : imagesCount - 1 };\n    });\n  };\n\n  render() {\n    const { images } = this.props;\n    const { imageIdx, showModal } = this.state;\n\n    return (\n      <>\n        <ul className='ImageGallery'>\n          {images.map(({ id, webformatURL, tags }, imageIdx) => (\n            <li\n              className='ImageGalleryItem'\n              key={id}\n              onClick={() =>\n                this.handleClick({ imageIdx, imagesCount: images.length })\n              }\n            >\n              <img\n                className='ImageGalleryItem-image'\n                src={webformatURL}\n                alt={tags}\n              />\n            </li>\n          ))}\n        </ul>\n\n        {showModal && (\n          <Modal\n            toggleModal={this.toggleModal}\n            setNextImage={this.setNextImage}\n            setPrevImage={this.setPrevImage}\n          >\n            <img\n              src={images[imageIdx].largeImageURL}\n              alt={images[imageIdx].tags}\n            />\n          </Modal>\n        )}\n      </>\n    );\n  }\n}\n\nexport { ImageGallery };\n","import PropTypes from 'prop-types';\n\nconst Button = ({ onClick }) => (\n  <button className='Button' type='button' onClick={onClick}>\n    Load more\n  </button>\n);\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n\nexport { Button };\n","import Spinner from 'react-loader-spinner';\nimport s from './Loader.module.css';\n\nconst Loader = () => (\n  <div className={s.loader}>\n    <Spinner\n      type='ThreeDots'\n      color='#3d8679'\n      height={120}\n      width={120}\n      timeout={3000}\n    />\n  </div>\n);\n\nexport { Loader };\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\naxios.defaults.params = {\n  key: '22909528-f64cd92665831d6faf8601377',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 12,\n};\n\nconst fetchImages = async ({ query: q, page }) => {\n  const { data } = await axios(\n    `?${new URLSearchParams({ q, page }).toString()}`,\n  );\n\n  return data;\n};\n\nexport { fetchImages };\n","import { Component } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { Searchbar } from './components/Searchbar';\nimport { ImageGallery } from './components/ImageGallery';\nimport { Button } from './components/Button';\nimport { Loader } from './components/Loader';\nimport { fetchImages } from './api/pixabay';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  REJECTED: 'rejected',\n  RESOLVED: 'resolved',\n};\n\nclass App extends Component {\n  state = {\n    query: '',\n    page: 1,\n    images: [],\n    status: Status.IDLE,\n  };\n\n  componentDidMount() {\n    this.setState({ query: 'top' });\n  }\n\n  getSnapshotBeforeUpdate() {\n    return window.scrollY;\n  }\n\n  async componentDidUpdate(prevProps, prevState, snapshot) {\n    const { query, page } = this.state;\n\n    if (query === prevState.query && page === prevState.page) return;\n\n    this.switchStatus(Status.PENDING);\n\n    try {\n      const { hits: newImages, totalHits } = await fetchImages({ query, page });\n\n      if (!totalHits) {\n        throw new Error(\n          'Sorry, there are no images matching your search query.',\n        );\n      }\n\n      if (!newImages.length) {\n        throw new Error(\n          `We're sorry, but you've reached the end of search results.`,\n        );\n      }\n\n      if (page === 1) this.resetImages();\n      this.addImages(newImages);\n      this.switchStatus(Status.RESOLVED);\n\n      if (page > 1) scrollBottom(snapshot);\n    } catch ({ message }) {\n      this.switchStatus(Status.REJECTED);\n      toast.error(message);\n    }\n  }\n\n  handleSubmit = query => {\n    this.setState({ query, page: 1 });\n  };\n\n  incrementPage = () => {\n    this.setState(({ page }) => ({ page: page + 1 }));\n  };\n\n  resetImages = () => {\n    this.setState({ images: [] });\n  };\n\n  addImages = newImages => {\n    this.setState(({ images }) => ({\n      images: [...images, ...newImages],\n    }));\n  };\n\n  switchStatus = newStatus => {\n    this.setState({ status: newStatus });\n  };\n\n  render() {\n    const { images, status } = this.state;\n\n    return (\n      <div className='App'>\n        <Searchbar onSubmit={this.handleSubmit} />\n        <ImageGallery images={images} />\n\n        {status === Status.PENDING && <Loader />}\n        {status === Status.RESOLVED && <Button onClick={this.incrementPage} />}\n\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n\nfunction scrollBottom(snapshot) {\n  window.scrollTo({\n    top: window.innerHeight + snapshot - 150,\n    behavior: 'smooth',\n  });\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}