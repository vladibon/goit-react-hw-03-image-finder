{"version":3,"sources":["components/Searchbar/Searchbar.jsx","components/ImageGalleryList/ImageGalleryList.jsx","components/Button/Button.jsx","api/pixabay.js","components/ImageGallery/ImageGallery.jsx","App.jsx","index.js"],"names":["Searchbar","state","query","handleChange","value","target","setState","handleSubmit","e","preventDefault","trim","toast","warn","props","onSubmit","toLowerCase","reset","nextProps","nextState","this","className","type","style","width","height","name","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryList","images","map","id","webformatURL","largeImageURL","tags","src","alt","Button","onClick","axios","defaults","baseURL","params","key","image_type","orientation","safesearch","per_page","fetchImages","a","q","page","URLSearchParams","toString","data","Status","ImageGallery","status","resetImages","addImages","newImages","switchStatus","newStatus","prevProps","prevState","window","scrollY","snapshot","isSameQuery","isSamePage","hits","length","scrollBottom","message","error","scrollTo","top","outerHeight","behavior","incrementPage","console","log","color","timeout","App","autoClose","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b9256969.chunk.js","sourcesContent":["import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { ImSearch } from 'react-icons/im';\nimport { toast } from 'react-toastify';\n\nclass Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func,\n  };\n\n  state = {\n    query: '',\n  };\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextState.query !== this.state.query;\n  }\n\n  handleChange = ({ target: { value } }) => {\n    this.setState({ query: value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    const { query } = this.state;\n\n    if (!query.trim()) {\n      return toast.warn('Please enter your search query and try again!');\n    }\n\n    this.props.onSubmit(query.toLowerCase());\n\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({ query: '' });\n  };\n\n  render() {\n    const { query } = this.state;\n\n    return (\n      <header className='Searchbar'>\n        <form className='SearchForm' onSubmit={this.handleSubmit}>\n          <button\n            type='submit'\n            className='SearchForm-button'\n            aria-label='Search images'\n          >\n            <ImSearch style={{ width: 22, height: 22 }} />\n          </button>\n\n          <input\n            className='SearchForm-input'\n            type='text'\n            name='searchQuery'\n            value={query}\n            autoComplete='off'\n            autoFocus\n            placeholder='Search images and photos'\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport { Searchbar };\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass ImageGalleryList extends Component {\n  static propTypes = {\n    images: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.number.isRequired,\n        webformatURL: PropTypes.string.isRequired,\n        largeImageURL: PropTypes.string,\n        tags: PropTypes.string,\n      }).isRequired,\n    ).isRequired,\n  };\n\n  render() {\n    const { images } = this.props;\n\n    return (\n      <ul className='ImageGallery'>\n        {images.map(({ id, webformatURL, largeImageURL, tags }) => (\n          <li className='ImageGalleryItem' key={id}>\n            <img\n              className='ImageGalleryItem-image'\n              src={webformatURL}\n              data-src={largeImageURL}\n              alt={tags}\n            />\n          </li>\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport { ImageGalleryList };\n","import PropTypes from 'prop-types';\n\nconst Button = ({ onClick }) => (\n  <button className='Button' type='button' onClick={onClick}>\n    Load more\n  </button>\n);\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n\nexport { Button };\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\naxios.defaults.params = {\n  key: '22909528-f64cd92665831d6faf8601377',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 12,\n};\n\nconst fetchImages = async ({ query: q, page }) => {\n  const { data } = await axios(\n    `?${new URLSearchParams({ q, page }).toString()}`,\n  );\n\n  return data;\n};\n\nexport { fetchImages };\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Loader from 'react-loader-spinner';\nimport { toast } from 'react-toastify';\nimport { ImageGalleryList } from '../ImageGalleryList';\nimport { Button } from '../Button';\nimport { fetchImages } from '../../api/pixabay';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  REJECTED: 'rejected',\n  RESOLVED: 'resolved',\n};\n\nclass ImageGallery extends Component {\n  static propTypes = {\n    query: PropTypes.string,\n    page: PropTypes.number.isRequired,\n    incrementPage: PropTypes.func.isRequired,\n  };\n\n  state = {\n    images: [],\n    status: Status.IDLE,\n  };\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    return window.scrollY;\n  }\n\n  async componentDidUpdate(prevProps, prevState, snapshot) {\n    const { query, page } = this.props;\n    const isSameQuery = query === prevProps.query;\n    const isSamePage = page === prevProps.page;\n\n    if (isSameQuery && isSamePage) return;\n\n    this.switchStatus(Status.PENDING);\n\n    try {\n      const { hits: newImages } = await fetchImages({ query, page });\n\n      if (!newImages.length) {\n        this.switchStatus(Status.IDLE);\n\n        return toast.warn(\n          'Sorry, there are no images matching your search query!',\n        );\n      }\n\n      if (!isSameQuery) this.resetImages();\n\n      this.addImages(newImages);\n      this.switchStatus(Status.RESOLVED);\n\n      if (page > 1) this.scrollBottom(snapshot);\n    } catch ({ message }) {\n      this.switchStatus(Status.REJECTED);\n      toast.error(message);\n    }\n  }\n\n  resetImages = () => {\n    this.setState({ images: [] });\n  };\n\n  addImages = newImages => {\n    this.setState(({ images }) => ({\n      images: [...images, ...newImages],\n    }));\n  };\n\n  switchStatus = newStatus => {\n    this.setState({ status: newStatus });\n  };\n\n  scrollBottom(snapshot) {\n    window.scrollTo({\n      top: window.outerHeight + snapshot,\n      behavior: 'smooth',\n    });\n  }\n\n  render() {\n    const { incrementPage } = this.props;\n    const { images, status } = this.state;\n\n    console.log(status);\n\n    return (\n      <>\n        <ImageGalleryList images={images} />\n\n        {status === Status.PENDING && (\n          <Loader\n            type='Puff'\n            color='#00BFFF'\n            height={100}\n            width={100}\n            timeout={3000}\n          />\n        )}\n\n        {status === Status.RESOLVED && <Button onClick={incrementPage} />}\n      </>\n    );\n  }\n}\n\nexport { ImageGallery };\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport { Searchbar } from './components/Searchbar';\nimport { ImageGallery } from './components/ImageGallery';\n\nclass App extends Component {\n  state = {\n    query: '',\n    page: 1,\n  };\n\n  handleSubmit = query => {\n    this.setState({ query, page: 1 });\n  };\n\n  incrementPage = () => {\n    this.setState(({ page }) => ({ page: page + 1 }));\n  };\n\n  render() {\n    const { query, page } = this.state;\n\n    return (\n      <div className='App'>\n        <Searchbar onSubmit={this.handleSubmit} />\n        <ImageGallery\n          query={query}\n          page={page}\n          incrementPage={this.incrementPage}\n        />\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}