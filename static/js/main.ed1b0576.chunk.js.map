{"version":3,"sources":["components/Loader/Loader.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryList/ImageGalleryList.jsx","components/Button/Button.jsx","components/Loader/Loader.jsx","api/pixabay.js","components/ImageGallery/ImageGallery.jsx","App.jsx","index.js"],"names":["module","exports","Searchbar","state","query","handleChange","value","target","setState","handleSubmit","e","preventDefault","trim","toast","warn","props","onSubmit","toLowerCase","reset","nextProps","nextState","this","className","type","style","width","height","name","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryList","images","map","id","webformatURL","largeImageURL","tags","src","alt","Button","onClick","Loader","s","loader","color","timeout","axios","defaults","baseURL","params","key","image_type","orientation","safesearch","per_page","fetchImages","a","q","page","URLSearchParams","toString","data","Status","ImageGallery","status","resetImages","addImages","newImages","switchStatus","newStatus","window","scrollY","prevProps","prevState","snapshot","hits","length","scrollBottom","message","error","scrollTo","top","innerHeight","behavior","incrementPage","console","dir","document","App","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"wIACAA,EAAOC,QAAU,CAAC,OAAS,yB,mJCIrBC,E,4MAKJC,MAAQ,CACNC,MAAO,I,EAOTC,aAAe,YAA4B,IAAfC,EAAc,EAAxBC,OAAUD,MAC1B,EAAKE,SAAS,CAAEJ,MAAOE,K,EAGzBG,aAAe,SAAAC,GACbA,EAAEC,iBAEF,IAAQP,EAAU,EAAKD,MAAfC,MAER,IAAKA,EAAMQ,OACT,OAAOC,IAAMC,KAAK,iDAGpB,EAAKC,MAAMC,SAASZ,EAAMa,eAE1B,EAAKC,S,EAGPA,MAAQ,WACN,EAAKV,SAAS,CAAEJ,MAAO,M,2DAvBzB,SAAsBe,EAAWC,GAC/B,OAAOA,EAAUhB,QAAUiB,KAAKlB,MAAMC,Q,oBAyBxC,WACE,IAAQA,EAAUiB,KAAKlB,MAAfC,MAER,OACE,wBAAQkB,UAAU,YAAlB,SACE,uBAAMA,UAAU,aAAaN,SAAUK,KAAKZ,aAA5C,UACE,wBACEc,KAAK,SACLD,UAAU,oBACV,aAAW,gBAHb,SAKE,cAAC,IAAD,CAAUE,MAAO,CAAEC,MAAO,GAAIC,OAAQ,QAGxC,uBACEJ,UAAU,mBACVC,KAAK,OACLI,KAAK,cACLrB,MAAOF,EACPwB,aAAa,MACbC,WAAS,EACTC,YAAY,2BACZC,SAAUV,KAAKhB,wB,GAzDH2B,a,gCCFlBC,E,4JAYJ,WACE,IAAQC,EAAWb,KAAKN,MAAhBmB,OAER,OACE,oBAAIZ,UAAU,eAAd,SACGY,EAAOC,KAAI,gBAAGC,EAAH,EAAGA,GAAIC,EAAP,EAAOA,aAAcC,EAArB,EAAqBA,cAAeC,EAApC,EAAoCA,KAApC,OACV,oBAAIjB,UAAU,mBAAd,SACE,qBACEA,UAAU,yBACVkB,IAAKH,EACL,WAAUC,EACVG,IAAKF,KAL6BH,Y,GAlBjBJ,aCDzBU,EAAS,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAAH,OACb,wBAAQrB,UAAU,SAASC,KAAK,SAASoB,QAASA,EAAlD,wB,kCCAIC,EAAS,kBACb,qBAAKtB,UAAWuB,IAAEC,OAAlB,SACE,cAAC,IAAD,CACEvB,KAAK,YACLwB,MAAM,UACNrB,OAAQ,IACRD,MAAO,IACPuB,QAAS,S,iBCRfC,IAAMC,SAASC,QAAU,0BACzBF,IAAMC,SAASE,OAAS,CACtBC,IAAK,qCACLC,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SAAU,IAGZ,IAAMC,EAAW,uCAAG,mCAAAC,EAAA,6DAAgBC,EAAhB,EAASxD,MAAUyD,EAAnB,EAAmBA,KAAnB,SACKZ,IAAM,IAAD,OACtB,IAAIa,gBAAgB,CAAEF,IAAGC,SAAQE,aAFrB,uBACVC,EADU,EACVA,KADU,kBAKXA,GALW,2CAAH,sDCHXC,EACE,OADFA,EAEK,UAFLA,EAGM,WAHNA,EAIM,WAGNC,E,4MAOJ/D,MAAQ,CACN+B,OAAQ,GACRiC,OAAQF,G,EAmCVG,YAAc,WACZ,EAAK5D,SAAS,CAAE0B,OAAQ,M,EAG1BmC,UAAY,SAAAC,GACV,EAAK9D,UAAS,gBAAG0B,EAAH,EAAGA,OAAH,MAAiB,CAC7BA,OAAO,GAAD,mBAAMA,GAAN,YAAiBoC,S,EAI3BC,aAAe,SAAAC,GACb,EAAKhE,SAAS,CAAE2D,OAAQK,K,6DA3C1B,WACE,OAAOC,OAAOC,U,uEAGhB,WAAyBC,EAAWC,EAAWC,GAA/C,yBAAAlB,EAAA,2DAC0BtC,KAAKN,MAArBX,EADV,EACUA,MAAOyD,EADjB,EACiBA,KAEXzD,IAAUuE,EAAUvE,OAASyD,IAASc,EAAUd,KAHtD,wDAIExC,KAAKkD,aAAaN,GAJpB,kBAOsCP,EAAY,CAAEtD,QAAOyD,SAP3D,oBAOkBS,EAPlB,EAOYQ,MAEOC,OATnB,wBAUM1D,KAAKkD,aAAaN,GAVxB,kBAYapD,IAAMC,KACX,2DAbR,QAiBiB,IAAT+C,GAAYxC,KAAK+C,cACrB/C,KAAKgD,UAAUC,GACfjD,KAAKkD,aAAaN,GAEdJ,EAAO,GAAGxC,KAAK2D,aAAaH,GArBpC,kDAsBaI,EAtBb,KAsBaA,QACT5D,KAAKkD,aAAaN,GAClBpD,IAAMqE,MAAMD,GAxBhB,0D,qFA0CA,SAAaJ,GACXJ,OAAOU,SAAS,CACdC,IAAKX,OAAOY,YAAcR,EAAW,IACrCS,SAAU,a,oBAId,WACE,IAAQC,EAAkBlE,KAAKN,MAAvBwE,cACR,EAA2BlE,KAAKlB,MAAxB+B,EAAR,EAAQA,OAAQiC,EAAhB,EAAgBA,OAIhB,OAFAqB,QAAQC,IAAIC,UAGV,qCACE,cAAC,EAAD,CAAkBxD,OAAQA,IACzBiC,IAAWF,GAAmB,cAAC,EAAD,CAAQtB,QAAS4C,IAC/CpB,IAAWF,GAAkB,cAAC,EAAD,W,GA3EXjC,aCVrB2D,E,4MACJxF,MAAQ,CACNC,MAAO,GACPyD,KAAM,G,EAGRpD,aAAe,SAAAL,GACb,EAAKI,SAAS,CAAEJ,QAAOyD,KAAM,K,EAG/B0B,cAAgB,WACd,EAAK/E,UAAS,kBAAe,CAAEqD,KAAjB,EAAGA,KAA2B,O,4CAG9C,WACE,MAAwBxC,KAAKlB,MAArBC,EAAR,EAAQA,MAAOyD,EAAf,EAAeA,KAEf,OACE,sBAAKvC,UAAU,MAAf,UACE,cAAC,EAAD,CAAWN,SAAUK,KAAKZ,eAC1B,cAAC,EAAD,CACEL,MAAOA,EACPyD,KAAMA,EACN0B,cAAelE,KAAKkE,gBAEtB,cAAC,IAAD,CAAgBK,UAAW,a,GAzBjB5D,aA+BH2D,I,kBC7BfE,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFL,SAASM,eAAe,W","file":"static/js/main.ed1b0576.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__1j2Bs\"};","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { ImSearch } from 'react-icons/im';\nimport { toast } from 'react-toastify';\n\nclass Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func,\n  };\n\n  state = {\n    query: '',\n  };\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextState.query !== this.state.query;\n  }\n\n  handleChange = ({ target: { value } }) => {\n    this.setState({ query: value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    const { query } = this.state;\n\n    if (!query.trim()) {\n      return toast.warn('Please enter your search query and try again!');\n    }\n\n    this.props.onSubmit(query.toLowerCase());\n\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({ query: '' });\n  };\n\n  render() {\n    const { query } = this.state;\n\n    return (\n      <header className='Searchbar'>\n        <form className='SearchForm' onSubmit={this.handleSubmit}>\n          <button\n            type='submit'\n            className='SearchForm-button'\n            aria-label='Search images'\n          >\n            <ImSearch style={{ width: 22, height: 22 }} />\n          </button>\n\n          <input\n            className='SearchForm-input'\n            type='text'\n            name='searchQuery'\n            value={query}\n            autoComplete='off'\n            autoFocus\n            placeholder='Search images and photos'\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport { Searchbar };\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass ImageGalleryList extends Component {\n  static propTypes = {\n    images: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.number.isRequired,\n        webformatURL: PropTypes.string.isRequired,\n        largeImageURL: PropTypes.string,\n        tags: PropTypes.string,\n      }).isRequired,\n    ).isRequired,\n  };\n\n  render() {\n    const { images } = this.props;\n\n    return (\n      <ul className='ImageGallery'>\n        {images.map(({ id, webformatURL, largeImageURL, tags }) => (\n          <li className='ImageGalleryItem' key={id}>\n            <img\n              className='ImageGalleryItem-image'\n              src={webformatURL}\n              data-src={largeImageURL}\n              alt={tags}\n            />\n          </li>\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport { ImageGalleryList };\n","import PropTypes from 'prop-types';\n\nconst Button = ({ onClick }) => (\n  <button className='Button' type='button' onClick={onClick}>\n    Load more\n  </button>\n);\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n\nexport { Button };\n","import Spinner from 'react-loader-spinner';\nimport s from './Loader.module.css';\n\nconst Loader = () => (\n  <div className={s.loader}>\n    <Spinner\n      type='ThreeDots'\n      color='#4d8679'\n      height={100}\n      width={100}\n      timeout={3000}\n    />\n  </div>\n);\n\nexport { Loader };\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\naxios.defaults.params = {\n  key: '22909528-f64cd92665831d6faf8601377',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 12,\n};\n\nconst fetchImages = async ({ query: q, page }) => {\n  const { data } = await axios(\n    `?${new URLSearchParams({ q, page }).toString()}`,\n  );\n\n  return data;\n};\n\nexport { fetchImages };\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport { ImageGalleryList } from '../ImageGalleryList';\nimport { Button } from '../Button';\nimport { Loader } from '../Loader';\nimport { fetchImages } from '../../api/pixabay';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  REJECTED: 'rejected',\n  RESOLVED: 'resolved',\n};\n\nclass ImageGallery extends Component {\n  static propTypes = {\n    query: PropTypes.string,\n    page: PropTypes.number.isRequired,\n    incrementPage: PropTypes.func.isRequired,\n  };\n\n  state = {\n    images: [],\n    status: Status.IDLE,\n  };\n\n  getSnapshotBeforeUpdate() {\n    return window.scrollY;\n  }\n\n  async componentDidUpdate(prevProps, prevState, snapshot) {\n    const { query, page } = this.props;\n\n    if (query === prevProps.query && page === prevProps.page) return;\n    this.switchStatus(Status.PENDING);\n\n    try {\n      const { hits: newImages } = await fetchImages({ query, page });\n\n      if (!newImages.length) {\n        this.switchStatus(Status.IDLE);\n\n        return toast.warn(\n          'Sorry, there are no images matching your search query!',\n        );\n      }\n\n      if (page === 1) this.resetImages();\n      this.addImages(newImages);\n      this.switchStatus(Status.RESOLVED);\n\n      if (page > 1) this.scrollBottom(snapshot);\n    } catch ({ message }) {\n      this.switchStatus(Status.REJECTED);\n      toast.error(message);\n    }\n  }\n\n  resetImages = () => {\n    this.setState({ images: [] });\n  };\n\n  addImages = newImages => {\n    this.setState(({ images }) => ({\n      images: [...images, ...newImages],\n    }));\n  };\n\n  switchStatus = newStatus => {\n    this.setState({ status: newStatus });\n  };\n\n  scrollBottom(snapshot) {\n    window.scrollTo({\n      top: window.innerHeight + snapshot - 150,\n      behavior: 'smooth',\n    });\n  }\n\n  render() {\n    const { incrementPage } = this.props;\n    const { images, status } = this.state;\n\n    console.dir(document);\n\n    return (\n      <>\n        <ImageGalleryList images={images} />\n        {status === Status.RESOLVED && <Button onClick={incrementPage} />}\n        {status === Status.PENDING && <Loader />}\n      </>\n    );\n  }\n}\n\nexport { ImageGallery };\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport { Searchbar } from './components/Searchbar';\nimport { ImageGallery } from './components/ImageGallery';\n\nclass App extends Component {\n  state = {\n    query: '',\n    page: 1,\n  };\n\n  handleSubmit = query => {\n    this.setState({ query, page: 1 });\n  };\n\n  incrementPage = () => {\n    this.setState(({ page }) => ({ page: page + 1 }));\n  };\n\n  render() {\n    const { query, page } = this.state;\n\n    return (\n      <div className='App'>\n        <Searchbar onSubmit={this.handleSubmit} />\n        <ImageGallery\n          query={query}\n          page={page}\n          incrementPage={this.incrementPage}\n        />\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}